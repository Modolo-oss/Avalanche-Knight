<!DOCTYPE html>
<html>
<head>
    <title>Test Login & Leaderboard</title>
    <script src="https://cdn.jsdelivr.net/npm/@funtico/sdk@latest/dist/funtico-sdk.js"></script>
</head>
<body>
    <h1>Test Login & Leaderboard</h1>
    <div id="status">Initializing...</div>
    <div id="leaderboard"></div>
    
    <script>
        async function testLoginAndLeaderboard() {
            const statusDiv = document.getElementById('status');
            const leaderboardDiv = document.getElementById('leaderboard');
            
            try {
                // Initialize SDK
                const sdk = new FunticoSDK({
                    authClientId: 'gl-avalanche-knight',
                    env: 'sandbox'
                });
                
                statusDiv.innerHTML = 'SDK initialized. Testing login...';
                
                // Test login
                try {
                    const loginResult = await sdk.signInWithFuntico();
                    statusDiv.innerHTML = 'Login initiated. Testing leaderboard...';
                    
                    // Wait a bit for login to complete
                    await new Promise(resolve => setTimeout(resolve, 3000));
                    
                    // Test leaderboard
                    try {
                        const leaderboard = await sdk.getLeaderboard();
                        statusDiv.innerHTML = 'Leaderboard test completed!';
                        
                        if (leaderboard && leaderboard.length > 0) {
                            leaderboardDiv.innerHTML = '<h2>Leaderboard Data:</h2><pre>' + JSON.stringify(leaderboard, null, 2) + '</pre>';
                        } else {
                            leaderboardDiv.innerHTML = '<h2>No leaderboard data</h2>';
                        }
                    } catch (leaderboardError) {
                        statusDiv.innerHTML = 'Leaderboard error: ' + leaderboardError.message;
                        leaderboardDiv.innerHTML = '<h2>Leaderboard Error:</h2><pre>' + JSON.stringify(leaderboardError, null, 2) + '</pre>';
                    }
                    
                } catch (loginError) {
                    statusDiv.innerHTML = 'Login error: ' + loginError.message;
                    leaderboardDiv.innerHTML = '<h2>Login Error:</h2><pre>' + JSON.stringify(loginError, null, 2) + '</pre>';
                }
                
            } catch (error) {
                statusDiv.innerHTML = 'SDK Error: ' + error.message;
                leaderboardDiv.innerHTML = '<h2>SDK Error:</h2><pre>' + JSON.stringify(error, null, 2) + '</pre>';
            }
        }
        
        // Run test when page loads
        window.onload = testLoginAndLeaderboard;
    </script>
</body>
</html>
